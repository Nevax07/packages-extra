#
# Maintainer: Philip MÃ¼ller <philm@manjaro.org>
#

pkgname=('catalyst-server')
pkgver=1.17.4
_pkgver=1.17.4-5
pkgrel=5
arch=('x86_64')
depends=(catalyst-input
         fontsproto
         libxdmcp
         libxfont
         libpciaccess
         libdrm
         libxi
         libxaw
         libxrender
         libdmx
         libxfixes
         libgl
         libxv
         libxext
         libgcrypt
         libxau
         pixman
         xkeyboard-config
         xorg-xkbcomp
         xorg-setxkbmap
         xorg-fonts-misc
         xproto
         randrproto
         renderproto
         xextproto
         inputproto
         kbproto
         videoproto
         dri2proto
         xineramaproto
         udev
         xorg-util-macros)
provides=('x-server' 'glamor-egl' 'xf86-video-modesetting'
          xorg-server-common=${_pkgver}
          xorg-server-devel=${_pkgver} 
          xorg-server-xdmx=${_pkgver}
          xorg-server-xephyr=${_pkgver}
          xorg-server-xnest=${_pkgver}
          xorg-server-xvfb=${_pkgver}
          xorg-server-xwayland=${_pkgver}
          xorg-server=${_pkgver}
          X-ABI-VIDEODRV_VERSION=19
          X-ABI-XINPUT_VERSION=21.1
          X-ABI-EXTENSION_VERSION=9.0)
conflicts=('nvidia-utils<=331.20' 'glamor-egl' 'xf86-video-modesetting'
           xorg-server-common
           xorg-server-devel
           xorg-server-xdmx
           xorg-server-xephyr
           xorg-server-xnest
           xorg-server-xwayland
           xorg-server-xvfb
           xorg-server)
groups=(xorg117)
backup=(etc/X11/xorg.conf.d/10-evdev.conf etc/X11/xorg.conf.d/10-quirks.conf)
pkgdesc="Xorg-Server for Catalyst"
url="http://manjaro.org"
_url="http://downloads.sourceforge.net/project/manjarodev/users/philm/xorg117/"
license=('custom')
source_x86_64=(${_url}/xorg-server-${_pkgver}-x86_64.pkg.tar.xz
        ${_url}/xorg-server-common-${_pkgver}-x86_64.pkg.tar.xz
        ${_url}/xorg-server-devel-${_pkgver}-x86_64.pkg.tar.xz
        ${_url}/xorg-server-xdmx-${_pkgver}-x86_64.pkg.tar.xz
        ${_url}/xorg-server-xephyr-${_pkgver}-x86_64.pkg.tar.xz
        ${_url}/xorg-server-xnest-${_pkgver}-x86_64.pkg.tar.xz
        ${_url}/xorg-server-xvfb-${_pkgver}-x86_64.pkg.tar.xz
        ${_url}/xorg-server-xwayland-${_pkgver}-x86_64.pkg.tar.xz)
sha256sums_x86_64=('f569cf9675982af88b5028cd8cad0027a0ac563a8c3cd49cd0c1cfc3e0b02545'
                   '82f8e979a5224bb5d4ee9a0b6e4b3b7cb4a69acb0ab89c0210629998113dcb01'
                   '0231211b648185f309ca53f10ad8c38fc4f1ea62df2bee94990b86567198ec29'
                   '2bcd14143e82c85a2dc0fcb1713308e0a660246ef6811cd545568efe1305c2ec'
                   'f844908fbde93ecdd8b693c5e901f347b3cb8e97f476db15c8680aaba7bd53bb'
                   '5864ffb26c04a75110c2a627f26dda29807f80615c182397309a876d8a365539'
                   'ad70c00492896da96778022fe73b148753c26829dbda2d3f36819621e4f4cac0'
                   'ac09b3c3559c49f9a534aab80e4dc70b1b6c3f84056a581d9123f3de19b068fd')

package() {
  cp -rPf usr "${pkgdir}"
  cp -rPf etc "${pkgdir}"
  cp -rPf var "${pkgdir}"
}

